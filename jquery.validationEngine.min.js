(function(h){var g={init:function(a){this.data("jqv")&&null!=this.data("jqv")||(a=g._saveOptions(this,a),h(document).on("click",".formError",function(){h(this).fadeOut(150,function(){h(this).closest(".formError").remove()})}));return this},attach:function(a){a=a?g._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";a.binded&&(this.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",
g._onFieldEvent),this.on("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",g._onFieldEvent),this.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",{delay:300},g._onFieldEvent));a.autoPositionUpdate&&h(window).bind("resize",{noAnimation:!0,formElem:this},g.updatePromptsPosition);this.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",
g._submitButtonClick);this.removeData("jqv_submitButton");this.on("submit",g._onSubmitEvent);return this},detach:function(){var a=this.data("jqv");this.off(a.validationEventTrigger,"["+a.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",g._onFieldEvent);this.off("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",g._onFieldEvent);this.off(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",
g._onFieldEvent);this.off("submit",g._onSubmitEvent);this.removeData("jqv");this.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",g._submitButtonClick);this.removeData("jqv_submitButton");a.autoPositionUpdate&&h(window).off("resize",g.updatePromptsPosition);return this},validate:function(a){var b=h(this),d=null;if(b.is("form")||b.hasClass("validationEngineContainer")){if(b.hasClass("validating"))return!1;
b.addClass("validating");var c=a?g._saveOptions(b,a):b.data("jqv");d=g._validateFields(this);setTimeout(function(){b.removeClass("validating")},100);if(d&&c.onSuccess)c.onSuccess();else if(!d&&c.onFailure)c.onFailure()}else if(b.is("form")||b.hasClass("validationEngineContainer"))b.removeClass("validating");else{var e=b.closest("form, .validationEngineContainer");c=e.data("jqv")?e.data("jqv"):h.validationEngine.defaults;if((d=g._validateField(b,c))&&c.onFieldSuccess)c.onFieldSuccess();else if(c.onFieldFailure&&
0<c.InvalidFields.length)c.onFieldFailure();return!d}return c.onValidationComplete?!!c.onValidationComplete(e,d):d},updatePromptsPosition:function(a){if(a&&this==window)var b=a.data.formElem,d=a.data.noAnimation;else b=h(this.closest("form, .validationEngineContainer"));var c=b.data("jqv");c||=g._saveOptions(b,c);b.find("["+c.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=h(this);c.prettySelect&&e.is(":hidden")&&(e=b.find("#"+c.usePrefix+e.attr("id")+c.useSuffix));var f=g._getPrompt(e),
l=h(f).find(".formErrorContent").html();f&&g._updatePrompt(e,h(f),l,void 0,!1,c,d)});return this},showPrompt:function(a,b,d,c){var e=this.closest("form, .validationEngineContainer").data("jqv");e||=g._saveOptions(this,e);d&&(e.promptPosition=d);e.showArrow=1==c;g._showPrompt(this,a,b,!1,e);return this},hide:function(){var a=h(this).closest("form, .validationEngineContainer"),b=h(this).attr("id"),d=a.data("jqv");d||=g._saveOptions(a,d);d=d&&d.fadeDuration?d.fadeDuration:.3;var c=a.is("form")||a.hasClass("validationEngineContainer")?
g._getClassName(b)+"formError":"parentForm"+g._getClassName(b);h("."+c).fadeTo(d,0,function(){h("."+c).remove()});return this},hideAll:function(){var a=this.data("jqv");a=a?a.fadeDuration:300;h(".formError").fadeTo(a,0,function(){h(this).closest(".formError").remove()});return this},_onFieldEvent:function(a){var b=h(this),d=b.closest("form, .validationEngineContainer"),c=d.data("jqv");c||=g._saveOptions(d,c);c.eventTrigger="field";1==c.notEmpty?0<b.val().length&&window.setTimeout(function(){g._validateField(b,
c)},a.data?a.data.delay:0):window.setTimeout(function(){g._validateField(b,c)},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=h(this),b=a.data("jqv");if(a.data("jqv_submitButton")){var d=h("#"+a.data("jqv_submitButton"));if(d&&0<d.length&&(d.hasClass("validate-skip")||"true"==d.attr("data-validation-engine-skip")))return!0}b.eventTrigger="submit";return(d=g._validateFields(a))&&b.ajaxFormValidation?(g._validateFormWithAjax(a,b),!1):b.onValidationComplete?!!b.onValidationComplete(a,d):d},
_checkAjaxStatus:function(a){var b=!0;h.each(a.ajaxValidCache,function(d,c){if(!c)return b=!1});return b},_checkAjaxFieldStatus:function(a,b){return 1==b.ajaxValidCache[a]},_validateFields:function(a){var b=a.data("jqv"),d=!1;a.trigger("jqv.form.validating");var c=null;a.find("["+b.validateAttribute+"*=validate]").not(":disabled").each(function(){var n=h(this),p=[];if(0>h.inArray(n.attr("name"),p)){(d|=g._validateField(n,b))&&null==c&&(n.is(":hidden")&&b.prettySelect?c=n=a.find("#"+b.usePrefix+g._jqSelector(n.attr("id"))+
b.useSuffix):(n.data("jqv-prompt-at")instanceof jQuery?n=n.data("jqv-prompt-at"):n.data("jqv-prompt-at")&&(n=h(n.data("jqv-prompt-at"))),c=n));if(b.doNotShowAllErrosOnSubmit)return!1;p.push(n.attr("name"));if(1==b.showOneMessage&&d)return!1}});a.trigger("jqv.form.result",[d]);if(d){if(b.scroll){var e=c.offset().top,f=c.offset().left,l=b.promptPosition;"string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":")));"bottomRight"!=l&&"bottomLeft"!=l&&(l=g._getPrompt(c))&&(e=l.offset().top);
b.scrollOffset&&(e-=b.scrollOffset);if(b.isOverflown){l=h(b.overflownDIV);if(!l.length)return!1;f=l.scrollTop();l=-parseInt(l.offset().top);e+=f+l-5;h(b.overflownDIV).filter(":not(:animated)").animate({scrollTop:e},1100,function(){b.focusFirstField&&c.focus()})}else h("html, body").animate({scrollTop:e},1100,function(){b.focusFirstField&&c.focus()}),h("html, body").animate({scrollLeft:f},1100)}else b.focusFirstField&&c.focus();return!1}return!0},_validateFormWithAjax:function(a,b){var d=a.serialize(),
c=b.ajaxFormValidationMethod?b.ajaxFormValidationMethod:"GET",e=b.ajaxFormValidationURL?b.ajaxFormValidationURL:a.attr("action"),f=b.dataType?b.dataType:"json";h.ajax({type:c,url:e,cache:!1,dataType:f,data:d,form:a,methods:g,options:b,beforeSend:function(){return b.onBeforeAjaxFormValidation(a,b)},error:function(l,n){if(b.onFailure)b.onFailure(l,n);else g._ajaxError(l,n)},success:function(l){if("json"==f&&!0!==l){for(var n=!1,p=0;p<l.length;p++){var r=l[p],m=h(h("#"+r[0])[0]);if(1==m.length){var k=
r[2];1==r[1]?""!=k&&k?(b.allrules[k]&&(r=b.allrules[k].alertTextOk)&&(k=r),b.showPrompts&&g._showPrompt(m,k,"pass",!1,b,!0)):g._closePrompt(m):(n|=1,b.allrules[k]&&(r=b.allrules[k].alertText)&&(k=r),b.showPrompts&&g._showPrompt(m,k,"",!1,b,!0))}}b.onAjaxFormComplete(!n,a,l,b)}else b.onAjaxFormComplete(!0,a,l,b)}})},_validateField:function(a,b,d){a.attr("id")||(a.attr("id","form-validation-field-"+h.validationEngine.fieldIdCounter),++h.validationEngine.fieldIdCounter);if(a.hasClass(b.ignoreFieldsWithClass)||
!b.validateNonVisibleFields&&(a.is(":hidden")&&!b.prettySelect||a.parent().is(":hidden")))return!1;var c=a.attr(b.validateAttribute);c=/validate\[(.*)\]/.exec(c);if(!c)return!1;var e=c[1],f=e.split(/\[|,|\]/);c=a.attr("name");var l="",n="",p=!1,r=!1;b.isError=!1;b.showArrow=1==b.showArrow;0<b.maxErrorsPerField&&(r=!0);for(var m=h(a.closest("form, .validationEngineContainer")),k=0;k<f.length;k++)f[k]=f[k].toString().replace(" ",""),""===f[k]&&delete f[k];for(var t=k=0;k<f.length;k++){if(r&&t>=b.maxErrorsPerField){p||
(d=h.inArray("required",f),p=-1!=d&&d>=k);break}var q=void 0;switch(f[k]){case "required":p=!0;q=g._getErrorMessage(m,a,f[k],f,k,b,g._required);break;case "custom":q=g._getErrorMessage(m,a,f[k],f,k,b,g._custom);break;case "groupRequired":var u="["+b.validateAttribute+"*="+f[k+1]+"]";q=m.find(u).eq(0);q[0]!=a[0]&&(g._validateField(q,b,d),b.showArrow=!0);(q=g._getErrorMessage(m,a,f[k],f,k,b,g._groupRequired))&&(p=!0);b.showArrow=!1;break;case "ajax":(q=g._ajax(a,f,k,b))&&(n="load");break;case "minSize":q=
g._getErrorMessage(m,a,f[k],f,k,b,g._minSize);break;case "maxSize":q=g._getErrorMessage(m,a,f[k],f,k,b,g._maxSize);break;case "min":q=g._getErrorMessage(m,a,f[k],f,k,b,g._min);break;case "max":q=g._getErrorMessage(m,a,f[k],f,k,b,g._max);break;case "past":q=g._getErrorMessage(m,a,f[k],f,k,b,g._past);break;case "future":q=g._getErrorMessage(m,a,f[k],f,k,b,g._future);break;case "dateRange":u="["+b.validateAttribute+"*="+f[k+1]+"]";b.firstOfGroup=m.find(u).eq(0);b.secondOfGroup=m.find(u).eq(1);if(b.firstOfGroup[0].value||
b.secondOfGroup[0].value)q=g._getErrorMessage(m,a,f[k],f,k,b,g._dateRange);q&&(p=!0);b.showArrow=!1;break;case "dateTimeRange":u="["+b.validateAttribute+"*="+f[k+1]+"]";b.firstOfGroup=m.find(u).eq(0);b.secondOfGroup=m.find(u).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)q=g._getErrorMessage(m,a,f[k],f,k,b,g._dateTimeRange);q&&(p=!0);b.showArrow=!1;break;case "maxCheckbox":a=h(m.find("input[name='"+c+"']"));q=g._getErrorMessage(m,a,f[k],f,k,b,g._maxCheckbox);break;case "minCheckbox":a=
h(m.find("input[name='"+c+"']"));q=g._getErrorMessage(m,a,f[k],f,k,b,g._minCheckbox);break;case "equals":q=g._getErrorMessage(m,a,f[k],f,k,b,g._equals);break;case "funcCall":q=g._getErrorMessage(m,a,f[k],f,k,b,g._funcCall);break;case "creditCard":q=g._getErrorMessage(m,a,f[k],f,k,b,g._creditCard);break;case "condRequired":q=g._getErrorMessage(m,a,f[k],f,k,b,g._condRequired);void 0!==q&&(p=!0);break;case "funcCallRequired":q=g._getErrorMessage(m,a,f[k],f,k,b,g._funcCallRequired),void 0!==q&&(p=!0)}u=
!1;if("object"==typeof q)switch(q.status){case "_break":u=!0;break;case "_error":q=q.message;break;case "_error_no_prompt":return!0}0==k&&0==e.indexOf("funcCallRequired")&&void 0!==q&&(""!=l&&(l+="<br/>"),l+=q,b.isError=!0,t++,u=!0);if(u)break;"string"==typeof q&&(""!=l&&(l+="<br/>"),l+=q,b.isError=!0,t++)}!p&&!a.val()&&1>a.val().length&&0>h.inArray("equals",f)&&(b.isError=!1);d=a.prop("type");f=a.data("promptPosition")||b.promptPosition;("radio"==d||"checkbox"==d)&&1<m.find("input[name='"+c+"']").length&&
(a="inline"===f?h(m.find("input[name='"+c+"'][type!=hidden]:last")):h(m.find("input[name='"+c+"'][type!=hidden]:first")),b.showArrow=b.showArrowOnRadioAndCheckbox);a.is(":hidden")&&b.prettySelect&&(a=m.find("#"+b.usePrefix+g._jqSelector(a.attr("id"))+b.useSuffix));b.isError&&b.showPrompts?g._showPrompt(a,l,n,!1,b):g._closePrompt(a);a.trigger("jqv.field.result",[a,b.isError,l]);c=h.inArray(a[0],b.InvalidFields);-1==c?b.isError&&b.InvalidFields.push(a[0]):b.isError||b.InvalidFields.splice(c,1);g._handleStatusCssClasses(a,
b);if(b.isError&&b.onFieldFailure)b.onFieldFailure(a);if(!b.isError&&b.onFieldSuccess)b.onFieldSuccess(a);return b.isError},_handleStatusCssClasses:function(a,b){b.addSuccessCssClassToField&&a.removeClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&a.removeClass(b.addFailureCssClassToField);b.addSuccessCssClassToField&&!b.isError&&a.addClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&b.isError&&a.addClass(b.addFailureCssClassToField)},_getErrorMessage:function(a,b,d,c,
e,f,l){var n=jQuery.inArray(d,c);if("custom"===d||"funcCall"===d||"funcCallRequired"===d)d=d+"["+c[n+1]+"]",delete c[n];n=d;var p=(b.attr("data-validation-engine")?b.attr("data-validation-engine"):b.attr("class")).split(" ");a="future"==d||"past"==d||"maxCheckbox"==d||"minCheckbox"==d?l(a,b,c,e,f):l(b,c,e,f);void 0!=a&&(b=g._getCustomErrorMessage(h(b),p,n,f))&&(a=b);return a},_getCustomErrorMessage:function(a,b,d,c){var e=/^custom\[.*\]$/.test(d)?g._validityProp.custom:g._validityProp[d];if(void 0!=
e&&(e=a.attr("data-errormessage-"+e),void 0!=e))return e;e=a.attr("data-errormessage");if(void 0!=e)return e;a="#"+a.attr("id");if("undefined"!=typeof c.custom_error_messages[a]&&"undefined"!=typeof c.custom_error_messages[a][d])e=c.custom_error_messages[a][d].message;else if(0<b.length)for(a=0;a<b.length&&0<b.length;a++){var f="."+b[a];if("undefined"!=typeof c.custom_error_messages[f]&&"undefined"!=typeof c.custom_error_messages[f][d]){e=c.custom_error_messages[f][d].message;break}}e||"undefined"==
typeof c.custom_error_messages[d]||"undefined"==typeof c.custom_error_messages[d].message||(e=c.custom_error_messages[d].message);return e},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",
equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(a,b,d,c,e){switch(a.prop("type")){case "radio":case "checkbox":if(e){if(!a.prop("checked"))return c.allrules[b[d]].alertTextCheckboxMultiple;break}e=a.closest("form, .validationEngineContainer");a=a.attr("name");if(0==e.find("input[name='"+a+"']:checked").length)return 1==e.find("input[name='"+a+"']:visible").length?c.allrules[b[d]].alertTextCheckboxe:
c.allrules[b[d]].alertTextCheckboxMultiple;break;default:e=h.trim(a.val());var f=h.trim(a.attr("data-validation-placeholder"));a=h.trim(a.attr("placeholder"));if(!e||f&&e==f||a&&e==a)return c.allrules[b[d]].alertText}},_groupRequired:function(a,b,d,c){var e="["+c.validateAttribute+"*="+b[d+1]+"]",f=!1;a.closest("form, .validationEngineContainer").find(e).each(function(){if(!g._required(h(this),b,d,c))return f=!0,!1});if(!f)return c.allrules[b[d]].alertText},_custom:function(a,b,d,c){var e=b[d+1],
f=c.allrules[e];if(f)if(f.regex)if(b=f.regex,!b)alert("jqv:custom regex not found - "+e);else{if(!(new RegExp(b)).test(a.val()))return c.allrules[e].alertText}else if(f.func)if(f=f.func,"function"!==typeof f)alert("jqv:custom parameter 'function' is no function - "+e);else{if(!f(a,b,d,c))return c.allrules[e].alertText}else alert("jqv:custom type not allowed "+e);else alert("jqv:custom rule not found - "+e)},_funcCall:function(a,b,d,c){var e=b[d+1];if(-1<e.indexOf(".")){e=e.split(".");for(var f=window;e.length;)f=
f[e.shift()];e=f}else e=window[e]||c.customFunctions[e];if("function"==typeof e)return e(a,b,d,c)},_funcCallRequired:function(a,b,d,c){return g._funcCall(a,b,d,c)},_equals:function(a,b,d,c){b=b[d+1];if(a.val()!=h("#"+b).val())return c.allrules.equals.alertText},_maxSize:function(a,b,d,c){b=b[d+1];if(a.val().length>b)return a=c.allrules.maxSize,a.alertText+b+a.alertText2},_minSize:function(a,b,d,c){b=b[d+1];if(a.val().length<b)return a=c.allrules.minSize,a.alertText+b+a.alertText2},_min:function(a,
b,d,c){b=parseFloat(b[d+1]);if(parseFloat(a.val())<b)return a=c.allrules.min,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_max:function(a,b,d,c){b=parseFloat(b[d+1]);if(parseFloat(a.val())>b)return a=c.allrules.max,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_past:function(a,b,d,c,e){d=d[c+1];a=h(a.find("*[name='"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=g._parseDate(a.val())}else a=g._parseDate(d);
if(g._parseDate(b.val())>a)return b=e.allrules.past,b.alertText2?b.alertText+g._dateToString(a)+b.alertText2:b.alertText+g._dateToString(a)},_future:function(a,b,d,c,e){d=d[c+1];a=h(a.find("*[name='"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=g._parseDate(a.val())}else a=g._parseDate(d);if(g._parseDate(b.val())<a)return b=e.allrules.future,b.alertText2?b.alertText+g._dateToString(a)+b.alertText2:b.alertText+g._dateToString(a)},
_isDate:function(a){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/)).test(a)},_isDateTime:function(a){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/)).test(a)},
_dateCompare:function(a,b){return new Date(a.toString())<new Date(b.toString())},_dateRange:function(a,b,d,c){if(!c.firstOfGroup[0].value&&c.secondOfGroup[0].value||c.firstOfGroup[0].value&&!c.secondOfGroup[0].value||!g._isDate(c.firstOfGroup[0].value)||!g._isDate(c.secondOfGroup[0].value)||!g._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value))return c.allrules[b[d]].alertText+c.allrules[b[d]].alertText2},_dateTimeRange:function(a,b,d,c){if(!c.firstOfGroup[0].value&&c.secondOfGroup[0].value||
c.firstOfGroup[0].value&&!c.secondOfGroup[0].value||!g._isDateTime(c.firstOfGroup[0].value)||!g._isDateTime(c.secondOfGroup[0].value)||!g._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value))return c.allrules[b[d]].alertText+c.allrules[b[d]].alertText2},_maxCheckbox:function(a,b,d,c,e){d=d[c+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").length>d)return e.showArrow=!1,e.allrules.maxCheckbox.alertText2?e.allrules.maxCheckbox.alertText+" "+d+" "+e.allrules.maxCheckbox.alertText2:
e.allrules.maxCheckbox.alertText},_minCheckbox:function(a,b,d,c,e){d=d[c+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").length<d)return e.showArrow=!1,e.allrules.minCheckbox.alertText+" "+d+" "+e.allrules.minCheckbox.alertText2},_creditCard:function(a,b,d,c){d=!1;a=a.val().replace(/ +/g,"").replace(/-+/g,"");var e=a.length;if(14<=e&&16>=e&&0<parseInt(a)){b=0;d=e-1;e=1;var f=new String;do{var l=parseInt(a.charAt(d));f+=0==e++%2?2*l:l}while(0<=--d);for(d=0;d<f.length;d++)b+=parseInt(f.charAt(d));
d=0==b%10}if(!d)return c.allrules.creditCard.alertText},_ajax:function(a,b,d,c){var e=c.allrules[b[d+1]];d=e.extraData;var f=e.extraDataDynamic;b={fieldId:a.attr("id"),fieldValue:a.val()};if("object"===typeof d)h.extend(b,d);else if("string"===typeof d){var l=d.split("&");for(d=0;d<l.length;d++){var n=l[d].split("=");n[0]&&n[0]&&(b[n[0]]=n[1])}}if(f)for(f=String(f).split(","),d=0;d<f.length;d++)l=f[d],h(l).length&&(n=a.closest("form, .validationEngineContainer").find(l).val(),l.replace("#",""),escape(n),
b[l.replace("#","")]=n);"field"==c.eventTrigger&&delete c.ajaxValidCache[a.attr("id")];if(!c.isError&&!g._checkAjaxFieldStatus(a.attr("id"),c))return h.ajax({type:c.ajaxFormValidationMethod,url:e.url,cache:!1,dataType:"json",data:b,field:a,rule:e,methods:g,options:c,beforeSend:function(){},error:function(p,r){if(c.onFailure)c.onFailure(p,r);else g._ajaxError(p,r)},success:function(p){var r=p[0],m=h("#"+r).eq(0);if(1==m.length){var k=p[2];p[1]?(c.ajaxValidCache[r]=!0,k?c.allrules[k]&&(p=c.allrules[k].alertTextOk)&&
(k=p):k=e.alertTextOk,c.showPrompts&&(k?g._showPrompt(m,k,"pass",!0,c):g._closePrompt(m)),"submit"==c.eventTrigger&&a.closest("form").submit()):(c.ajaxValidCache[r]=!1,c.isError=!0,k?c.allrules[k]&&(p=c.allrules[k].alertText)&&(k=p):k=e.alertText,c.showPrompts&&g._showPrompt(m,k,"",!0,c))}m.trigger("jqv.field.result",[m,c.isError,k])}}),e.alertTextLoad},_ajaxError:function(a,b){0==a.status&&null==b?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+
a.status+" "+b)},_dateToString:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(a){var b=a.split("-");b==a&&(b=a.split("/"));return b==a?(b=a.split("."),new Date(b[2],b[1]-1,b[0])):new Date(b[0],b[1]-1,b[2])},_showPrompt:function(a,b,d,c,e,f){a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=h(a.data("jqv-prompt-at")));var l=g._getPrompt(a);f&&(l=!1);h.trim(b)&&(l?g._updatePrompt(a,l,b,d,c,e):g._buildPrompt(a,
b,d,c,e))},_buildPrompt:function(a,b,d,c,e){var f=h("<div>");f.addClass(g._getClassName(a.attr("id"))+"formError");f.addClass("parentForm"+g._getClassName(a.closest("form, .validationEngineContainer").attr("id")));f.addClass("formError");switch(d){case "pass":f.addClass("greenPopup");break;case "load":f.addClass("blackPopup")}c&&f.addClass("ajaxed");h("<div>").addClass("formErrorContent").html(b).appendTo(f);b=a.data("promptPosition")||e.promptPosition;if(e.showArrow)switch(d=h("<div>").addClass("formErrorArrow"),
"string"==typeof b&&(c=b.indexOf(":"),-1!=c&&(b=b.substring(0,c))),b){case "bottomLeft":case "bottomRight":f.find(".formErrorContent").before(d);d.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');
break;case "topLeft":case "topRight":d.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),f.append(d)}e.addPromptClass&&f.addClass(e.addPromptClass);d=a.attr("data-required-class");
void 0!==d?f.addClass(d):e.prettySelect&&h("#"+a.attr("id")).next().is("select")&&(d=h("#"+a.attr("id").substr(e.usePrefix.length).substring(e.useSuffix.length)).attr("data-required-class"),void 0!==d&&f.addClass(d));f.css({opacity:0});"inline"===b?(f.addClass("inline"),"undefined"!==typeof a.attr("data-prompt-target")&&0<h("#"+a.attr("data-prompt-target")).length?f.appendTo(h("#"+a.attr("data-prompt-target"))):a.after(f)):a.before(f);c=g._calculatePosition(a,f,e);h("body").hasClass("rtl")?f.css({position:"inline"===
b?"relative":"fixed",top:c.callerTopPosition,left:"initial",right:c.callerleftPosition,marginTop:c.marginTopSize,opacity:0}).data("callerField",a):f.css({position:"inline"===b?"relative":"fixed",top:c.callerTopPosition,left:c.callerleftPosition,right:"initial",marginTop:c.marginTopSize,opacity:0}).data("callerField",a);e.autoHidePrompt&&setTimeout(function(){f.animate({opacity:0},function(){f.closest(".formError").remove()})},e.autoHideDelay);return f.animate({opacity:.87})},_updatePrompt:function(a,
b,d,c,e,f,l){b&&("undefined"!==typeof c&&("pass"==c?b.addClass("greenPopup"):b.removeClass("greenPopup"),"load"==c?b.addClass("blackPopup"):b.removeClass("blackPopup")),e?b.addClass("ajaxed"):b.removeClass("ajaxed"),b.find(".formErrorContent").html(d),a=g._calculatePosition(a,b,f),a=h("body").hasClass("rtl")?{top:a.callerTopPosition,left:"initial",right:a.callerleftPosition,marginTop:a.marginTopSize,opacity:.87}:{top:a.callerTopPosition,left:a.callerleftPosition,right:"initial",marginTop:a.marginTopSize,
opacity:.87},b.css({opacity:0,display:"block"}),l?b.css(a):b.animate(a))},_closePrompt:function(a){var b=g._getPrompt(a);b&&b.fadeTo("fast",0,function(){b.closest(".formError").remove()})},closePrompt:function(a){return g._closePrompt(a)},_getPrompt:function(a){var b=h(a).closest("form, .validationEngineContainer").attr("id");a=g._getClassName(a.attr("id"))+"formError";if(b=h("."+g._escapeExpression(a)+".parentForm"+g._getClassName(b))[0])return h(b)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*~':"!\^$\[\]\(\)=>\|])/g,
"\\$1")},isRTL:function(a){var b=h(document),d=h("body");return!!(a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||b.hasClass("rtl")||"rtl"===(b.attr("dir")||"").toLowerCase()||d.hasClass("rtl")||"rtl"===(d.attr("dir")||"").toLowerCase())},_calculatePosition:function(a,b,d){var c=h(a).parents(".k-window"),e,f=a.width(),l=a.offset().left,n=a.offset().top;var p=b.height();var r=a.height()+12;null!=c&&(c=c.offset(),l-=c.left,n-=c.top);c=e=0;p=-p;d=a.data("promptPosition")||d.promptPosition;
var m,k=m=0;if("string"==typeof d&&-1!=d.indexOf(":")){var t=d.substring(d.indexOf(":")+1);d=d.substring(0,d.indexOf(":"));-1!=t.indexOf(",")&&(m=t.substring(t.indexOf(",")+1),t=t.substring(0,t.indexOf(",")),k=parseInt(m),isNaN(k)&&(k=0));m=parseInt(t);isNaN(t)}switch(d){default:case "topRight":e+=l+f-27;c+=n-r;break;case "topLeft":c+=n-r;e+=l;break;case "centerRight":c=n+4;p=0;e=l+a.outerWidth(!0)+5;break;case "centerLeft":e=l-(b.width()+2);c=n+4;p=0;break;case "bottomLeft":c=n+r+5;p=0;e=l;break;
case "bottomRight":e=l+f-27;c=n+r+5;p=0;break;case "inline":p=c=e=0}return{callerTopPosition:c+k+"px",callerleftPosition:e+m+"px",marginTopSize:p+"px"}},_saveOptions:function(a,b){if(h.validationEngineLanguage)var d=h.validationEngineLanguage.allRules;else h.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");h.validationEngine.defaults.allrules=d;b=h.extend(!0,{},h.validationEngine.defaults,b);a.data("jqv",b);return b},_getClassName:function(a){if(a)return a.replace(/:/g,
"_").replace(/\./g,"_")},_jqSelector:function(a){return a.replace(/([;&,\.\+\*~':"!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(a,b,d,c){for(d+=1;d<b.length;d++){var e=jQuery("#"+b[d]).first();if(e.length&&void 0==g._required(e,["required"],0,c,!0))return g._required(a,["required"],0,c)}},_submitButtonClick:function(a){a=h(this);a.closest("form, .validationEngineContainer").data("jqv_submitButton",a.attr("id"))}};h.fn.validationEngine=function(a){var b=h(this);if(!b[0])return b;if("string"==
typeof a&&"_"!=a.charAt(0)&&g[a])return"showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&g.init.apply(b),g[a].apply(b,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)h.error("Method "+a+" does not exist in jQuery.validationEngine");else return g.init.apply(b,arguments),g.attach.apply(b)};h.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"topRight",
bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:h.noop,onBeforeAjaxFormValidation:h.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",
addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1E4,fadeDuration:300,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};h(function(){h.validationEngine.defaults.promptPosition=g.isRTL()?"topLeft":"topRight"})})(jQuery);
